<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  
  <title>Document</title>
</head>
<body>
  
  <div class="hero_container name"><h1>Keith Ingram</h1> <p>Junior Web Developer</p></div>

    <div class="container2"><img class="image" src="./media/myAvatar.png" alt="Avatar Image"></a></div>
    
    <div class="nav_container" ><nav>
      <a href="index.html">Home</a> |
      <a href="folio.html">Portfolio</a> |
      <a href="#">Projects</a> |
      <a href="contact.html">Contact</a>
    </nav></div>
    <section>
      <p>
        Convert your number grade to a letter grade
      </p>
      
      <input type="text" id="stdin"/>
      <p id="credits"></p>
      <form id="form">
        <button id="run">Run</button>
      </form>
      <code id="output"></code>
      
      <script>
      var run = document.getElementById("run");
      
      run.addEventListener("click", function (e) {
        
        e.preventDefault();
        
        var stdin = document.getElementById("stdin");
        var form = document.getElementById("form");
        var credits = document.getElementById("credits");
        var output = document.getElementById("output");
        
        output.innerHTML = "Loading...";
        
        console.log(stdin.value);
        
        var obj = {};
        obj["clientId"] = "f276241840dcc148b417662f85bb5ad3";
        obj["clientSecret"] = "8ad164c6ce9948c2645e6a83f94679d0092371c188156bfcb6f37e2884b9aa2b";
        obj["script"] = "import java.util.Scanner;\r\n\r\npublic class gradeScale {\r\n\tpublic static void main(String[] args) {\r\n\t\t@SuppressWarnings(\"resource\")\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\tSystem.out.println(\"Enter a grade:\");\r\n\t\tint n = scan.nextInt();\r\n\t\tif (n >= 90 && n <= 100) {\r\n\t\t\tSystem.out.println(\"You made an A\");\r\n\t\t} else if (n >= 80 && n < 90) {\r\n\t\t\tSystem.out.println(\"You made a B\");\r\n\t\t} else if (n >= 70 && n < 80) {\r\n\t\t\tSystem.out.println(\"You made a C\");\r\n\t\t} else if (n >= 65 && n < 70) {\r\n\t\t\tSystem.out.println(\"You made a D\");\r\n\t\t} else if (n >= 0 && n < 65) {\r\n\t\t\tSystem.out.println(\"You made an F\");\r\n\t\t} else {\r\n\t\t\tSystem.out.println(\"The number you entered is not in the range\");\r\n\t\t}\r\n\t}\r\n}\r\n";
        obj["language"] = "java";
        obj["versionIndex"] = "0";
        obj["stdin"] = stdin.value;
        var jsonStr = JSON.stringify(obj);
        
        console.log(jsonStr);
        
        const proxyurl = "https://cors-anywhere.herokuapp.com/";
        const url = "https://api.jdoodle.com/v1/execute";
        fetch(proxyurl + url, {
          method: 'post',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: jsonStr
        })
        .then(response => {
          return response.json()
        })
        .then(data => {
          console.log(data);
          var outputStr = data.output;
          console.log(outputStr);
          var formattedOutput = outputStr.replace(/(?:\r\n|\r|\n)/g, '<br>');
          output.innerHTML = formattedOutput;
        })
        .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))
        
        const creditsUrl = "https://api.jdoodle.com/v1/credit-spent";
        fetch(proxyurl + creditsUrl, {
          method: 'post',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: jsonStr
        })
        .then(response => {
          return response.json()
        })
        .then(data => {
          console.log(data);
          var creditsLeft = 200 - data.used;
          console.log(credits);
          credits.innerHTML = "Runs left: " + creditsLeft;
        })
        .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))
        
        
        
        
      });
      </script>
  </section>
<footer class="footer"></footer>

</body>
 
</html>
